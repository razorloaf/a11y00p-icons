import * as React from "react";
import { forwardRef } from "react";
import { IconProps } from "../types";
import { useIconFamily } from "../IconFamilyContext";
import { useOSAccessibility } from "../AccessibilityUtils";

const CashIcon = forwardRef<SVGSVGElement, IconProps>(
  (props, ref) => {
    const {
      color = 'currentColor',
      size = 24,
      title,
      decorative = false,
      disableOSAdaptation = false,
      highContrastStrokeWidth,
      ...restProps
    } = useIconFamily(props);

    const { prefersHighContrast, forcedColors } = useOSAccessibility();
    const titleId = React.useId();
    const accessibleTitle = title === undefined ? "Cash" : title;
    const isDecorativeOnly = decorative || accessibleTitle === '';

    const [isInsideButton, setIsInsideButton] = React.useState(false);

    React.useEffect(() => {
      if (ref && 'current' in ref && ref.current) {
        let parent = ref.current.parentElement;
        while (parent) {
          if (
            parent.tagName === 'BUTTON' ||
            parent.tagName === 'A' ||
            parent.getAttribute('role') === 'button'
          ) {
            setIsInsideButton(true);
            break;
          }
          parent = parent.parentElement;
        }
      }
    }, [ref]);

    const isHighContrast = !disableOSAdaptation && (prefersHighContrast || forcedColors);
    const strokeWidth = isHighContrast && highContrastStrokeWidth !== undefined
      ? highContrastStrokeWidth
      : restProps.strokeWidth;

    return isDecorativeOnly || isInsideButton ? (
      <svg
        width={size}
        height={size}
        viewBox="0 0 24 24"
        fill="none"
        stroke={color}
        strokeWidth={strokeWidth}
        ref={ref}
        aria-hidden="true"
        {...restProps}
      >
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.2539 7.1979C19.2541 7.19796 19.2542 7.19803 19 7.76898L19.2542 7.19803L19.625 7.76898V15.6813L18.7478 16.2527C18.7476 16.2531 18.7476 16.2531 18.7477 16.2531L18.7474 16.253L18.7444 16.2517L18.7275 16.2444C18.7116 16.2377 18.6868 16.2273 18.6537 16.214C18.5876 16.1872 18.4885 16.1485 18.3622 16.103C18.1091 16.0118 17.7491 15.8941 17.3259 15.7899C16.4659 15.578 15.4057 15.4368 14.4609 15.6338C13.432 15.8483 12.8707 16.2141 12.2749 16.6024C12.2066 16.6469 12.1379 16.6917 12.068 16.7366C11.3388 17.2047 10.5479 17.625 9.08333 17.625C7.66917 17.625 6.55706 17.2677 5.79373 16.9052C5.41248 16.7242 5.11788 16.5417 4.91497 16.4013C4.81345 16.3311 4.73462 16.2712 4.67911 16.227C4.65134 16.2049 4.62938 16.1867 4.6133 16.1731L4.59359 16.1562L4.58704 16.1504L4.58461 16.1483L4.58359 16.1474L4.58314 16.147C4.58293 16.1468 4.58272 16.1466 5 15.6813L4.58272 16.1466L4.375 15.6813V7.76898L5.3755 7.27014C5.37587 7.26963 5.37585 7.26962 5.37584 7.26961L5.37558 7.26942L5.37519 7.26913L5.37488 7.26889C5.37488 7.26889 5.37529 7.2692 5.37611 7.2698L5.38591 7.27694C5.39566 7.28397 5.41179 7.29545 5.43401 7.31074C5.47849 7.34134 5.54721 7.3871 5.6379 7.44301C5.8196 7.55504 6.08766 7.7067 6.42415 7.85883C7.1007 8.16472 8.032 8.46268 9.08333 8.46268C10.0837 8.46268 10.6546 8.16596 11.323 7.76169C11.3849 7.72425 11.4477 7.68576 11.5119 7.64651C12.1684 7.24445 12.9571 6.76142 14.2042 6.49809C15.4191 6.24155 16.693 6.43025 17.6272 6.66147C18.1011 6.77876 18.5032 6.91097 18.7879 7.01425C18.9305 7.06598 19.0443 7.11072 19.1238 7.14308C19.1636 7.15927 19.1948 7.17238 19.2167 7.18176L19.2427 7.19294L19.2503 7.19627L19.2527 7.19735L19.2536 7.19774L19.2539 7.1979ZM5.625 8.86304V15.3725C5.6254 15.3728 5.6258 15.3731 5.62619 15.3734C5.78065 15.4802 6.01696 15.6274 6.32994 15.776C6.95506 16.0729 7.88461 16.375 9.08333 16.375C10.2317 16.375 10.7888 16.0724 11.3928 15.6847C11.4582 15.6426 11.5247 15.5992 11.5927 15.5547C12.2032 15.1555 12.9395 14.6741 14.2058 14.4101C15.4177 14.1575 16.6907 14.346 17.6249 14.5762C17.9026 14.6446 18.1557 14.718 18.375 14.7878V8.19419C18.3706 8.19257 18.3661 8.19095 18.3616 8.18931C18.1089 8.09766 17.7496 7.97947 17.3269 7.87486C16.4681 7.66232 15.4086 7.52133 14.4625 7.72112C13.4322 7.93867 12.8078 8.31996 12.1586 8.71644C12.096 8.75461 12.0333 8.79293 11.97 8.83125C11.2212 9.28413 10.4163 9.71268 9.08333 9.71268C7.80134 9.71268 6.69097 9.35129 5.90918 8.99783C5.80935 8.95269 5.71452 8.90752 5.625 8.86304ZM5.41501 15.214C5.4147 15.2137 5.41473 15.2137 5.41511 15.214ZM16.6449 9.97844C15.7517 9.36169 14.7544 9.72913 14.3633 10.0085L13.6367 8.99142C14.2456 8.55638 15.8483 7.90928 17.3551 8.94985L16.6449 9.97844ZM8.20988 15.4774C7.58679 15.3737 6.9392 15.1244 6.55806 14.7433L7.44194 13.8594C7.5608 13.9783 7.91321 14.1608 8.41512 14.2444C8.90068 14.3252 9.38447 14.2884 9.73045 14.123L10.2696 15.2507C9.61553 15.5634 8.84932 15.5838 8.20988 15.4774Z" fill="#262525"/>
      </svg>
    ) : (
      <svg
        width={size}
        height={size}
        viewBox="0 0 24 24"
        fill="none"
        stroke={color}
        strokeWidth={strokeWidth}
        ref={ref}
        role="img"
        aria-labelledby={accessibleTitle ? titleId : undefined}
        {...restProps}
      >
        {accessibleTitle && <title id={titleId}>{accessibleTitle}</title>}
        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.2539 7.1979C19.2541 7.19796 19.2542 7.19803 19 7.76898L19.2542 7.19803L19.625 7.76898V15.6813L18.7478 16.2527C18.7476 16.2531 18.7476 16.2531 18.7477 16.2531L18.7474 16.253L18.7444 16.2517L18.7275 16.2444C18.7116 16.2377 18.6868 16.2273 18.6537 16.214C18.5876 16.1872 18.4885 16.1485 18.3622 16.103C18.1091 16.0118 17.7491 15.8941 17.3259 15.7899C16.4659 15.578 15.4057 15.4368 14.4609 15.6338C13.432 15.8483 12.8707 16.2141 12.2749 16.6024C12.2066 16.6469 12.1379 16.6917 12.068 16.7366C11.3388 17.2047 10.5479 17.625 9.08333 17.625C7.66917 17.625 6.55706 17.2677 5.79373 16.9052C5.41248 16.7242 5.11788 16.5417 4.91497 16.4013C4.81345 16.3311 4.73462 16.2712 4.67911 16.227C4.65134 16.2049 4.62938 16.1867 4.6133 16.1731L4.59359 16.1562L4.58704 16.1504L4.58461 16.1483L4.58359 16.1474L4.58314 16.147C4.58293 16.1468 4.58272 16.1466 5 15.6813L4.58272 16.1466L4.375 15.6813V7.76898L5.3755 7.27014C5.37587 7.26963 5.37585 7.26962 5.37584 7.26961L5.37558 7.26942L5.37519 7.26913L5.37488 7.26889C5.37488 7.26889 5.37529 7.2692 5.37611 7.2698L5.38591 7.27694C5.39566 7.28397 5.41179 7.29545 5.43401 7.31074C5.47849 7.34134 5.54721 7.3871 5.6379 7.44301C5.8196 7.55504 6.08766 7.7067 6.42415 7.85883C7.1007 8.16472 8.032 8.46268 9.08333 8.46268C10.0837 8.46268 10.6546 8.16596 11.323 7.76169C11.3849 7.72425 11.4477 7.68576 11.5119 7.64651C12.1684 7.24445 12.9571 6.76142 14.2042 6.49809C15.4191 6.24155 16.693 6.43025 17.6272 6.66147C18.1011 6.77876 18.5032 6.91097 18.7879 7.01425C18.9305 7.06598 19.0443 7.11072 19.1238 7.14308C19.1636 7.15927 19.1948 7.17238 19.2167 7.18176L19.2427 7.19294L19.2503 7.19627L19.2527 7.19735L19.2536 7.19774L19.2539 7.1979ZM5.625 8.86304V15.3725C5.6254 15.3728 5.6258 15.3731 5.62619 15.3734C5.78065 15.4802 6.01696 15.6274 6.32994 15.776C6.95506 16.0729 7.88461 16.375 9.08333 16.375C10.2317 16.375 10.7888 16.0724 11.3928 15.6847C11.4582 15.6426 11.5247 15.5992 11.5927 15.5547C12.2032 15.1555 12.9395 14.6741 14.2058 14.4101C15.4177 14.1575 16.6907 14.346 17.6249 14.5762C17.9026 14.6446 18.1557 14.718 18.375 14.7878V8.19419C18.3706 8.19257 18.3661 8.19095 18.3616 8.18931C18.1089 8.09766 17.7496 7.97947 17.3269 7.87486C16.4681 7.66232 15.4086 7.52133 14.4625 7.72112C13.4322 7.93867 12.8078 8.31996 12.1586 8.71644C12.096 8.75461 12.0333 8.79293 11.97 8.83125C11.2212 9.28413 10.4163 9.71268 9.08333 9.71268C7.80134 9.71268 6.69097 9.35129 5.90918 8.99783C5.80935 8.95269 5.71452 8.90752 5.625 8.86304ZM5.41501 15.214C5.4147 15.2137 5.41473 15.2137 5.41511 15.214ZM16.6449 9.97844C15.7517 9.36169 14.7544 9.72913 14.3633 10.0085L13.6367 8.99142C14.2456 8.55638 15.8483 7.90928 17.3551 8.94985L16.6449 9.97844ZM8.20988 15.4774C7.58679 15.3737 6.9392 15.1244 6.55806 14.7433L7.44194 13.8594C7.5608 13.9783 7.91321 14.1608 8.41512 14.2444C8.90068 14.3252 9.38447 14.2884 9.73045 14.123L10.2696 15.2507C9.61553 15.5634 8.84932 15.5838 8.20988 15.4774Z" fill="#262525"/>
      </svg>
    );
  }
);

CashIcon.displayName = "CashIcon";

export default CashIcon;
